{"mappings":"iiBAAA,I,EAAAA,EAAAC,EAAA,S,uCAOMC,EAAoBC,SAASC,cAAc,sBAC3CC,EAAqBF,SAASC,cAAc,oBAG5CE,EAAgBH,SAASC,cAAc,gBACvCG,EAAaJ,SAASC,cAAc,eACpCI,EAAaL,SAASC,cAAc,gBAMpCK,EAAc,SAACC,GACfA,EACFJ,EAAcK,UAAUC,IAAI,WAE5BN,EAAcK,UAAUE,OAAO,U,EA+B7BC,G,EAAmBC,EAAAf,EAAA,CAAAe,EAAAC,GAAAC,MAAA,SAAAC,EAAOC,G,IAExBC,EAMIC,E,uEANJD,EAAOD,EAAEG,OAAOC,QAAQ,yBACtB,C,uBACNC,QAAQC,IAAIL,EAAKM,IACjBjB,GAAY,GACZD,EAAWmB,UAAY,G,mBAED,EAAAC,EAAAC,gBAAeT,EAAKM,I,OAAlCL,EAAKS,EAAAC,KACKV,GAChB,EAAAW,EAAAC,wBAAuBZ,EAAOb,G,kDAE9BgB,QAAQC,IAAIK,EAAAI,GAAMC,S,mEAZQhB,G,iCA0BhCd,EAAmB+B,iBAAiB,SApDP,SAACjB,GAC5B,GAA0B,WAAtBA,EAAEG,OAAOe,SAAb,CAMA,GAFAb,QAAQC,IAAIN,EAAEG,OAAOI,IAED,YAAhBP,EAAEG,OAAOI,GAAkB,CAC7BxB,EAAkByB,UAAY,GAC9B,IAAMW,EAAaC,aAAaC,QAAQ,gBAClCC,EAASC,KAAKC,MAAML,IAAe,GACzCd,QAAQC,IAAIgB,IACZ,EAAAT,EAAAY,2BAA0BH,EAAQvC,E,CAGpC,GAAoB,UAAhBiB,EAAEG,OAAOI,GAAgB,CAC3BxB,EAAkByB,UAAY,GAC9B,IAAMkB,EAAaN,aAAaC,QAAQ,cAClCM,EAASJ,KAAKC,MAAME,IAAe,GACzCrB,QAAQC,IAAIqB,IACZ,EAAAd,EAAAY,2BAA0BE,EAAQ5C,E,CAlBlC,C,IAoDJA,EAAkBkC,iBAAiB,QAAStB,GAI5CP,EAAW6B,iBAAiB,SAfH,SAACjB,GACPA,EAAEG,OAAOC,QAAQ,sBAEhCd,GAAY,E","sources":["src/js/my-library.js"],"sourcesContent":["import {\n  createLibraryMoviesMarkup,\n  createMovieModalMarkup,\n} from \"./renderMarkup\";\nimport { fetchMovieByID } from \"./tmdb-api\";\n\n// DOM\nconst movieCardsLibrary = document.querySelector(\".movie-cards__list\");\nconst heroLibraryButtons = document.querySelector(\".hero__container\");\n// ---------------------------------------------------------------------\n// -index.js\nconst backdropModal = document.querySelector(\"div.backdrop\");\nconst closeModal = document.querySelector(\".modal__btn\");\nconst modalMovie = document.querySelector(\".modal-movie\");\n\n// Variables-index.js\nlet selectedMovie = null;\n\n// Funciones-index.js\nconst toogleModal = (isVisible) => {\n  if (isVisible) {\n    backdropModal.classList.add(\"visible\");\n  } else {\n    backdropModal.classList.remove(\"visible\");\n  }\n};\n\n// Manejadores de eventos\nconst handleLibraryButtons = (e) => {\n  if (e.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n\n  console.log(e.target.id);\n\n  if (e.target.id === \"watched\") {\n    movieCardsLibrary.innerHTML = \"\";\n    const moviesJSON = localStorage.getItem(\"watchedArray\");\n    const movies = JSON.parse(moviesJSON) || [];\n    console.log(movies);\n    createLibraryMoviesMarkup(movies, movieCardsLibrary);\n  }\n\n  if (e.target.id === \"queue\") {\n    movieCardsLibrary.innerHTML = \"\";\n    const moviesJSON = localStorage.getItem(\"queueArray\");\n    const movies = JSON.parse(moviesJSON) || [];\n    console.log(movies);\n    createLibraryMoviesMarkup(movies, movieCardsLibrary);\n  }\n};\n\n// ---------------------------------------------------------------------\n// -index.js\nconst handleSelectCard = async (e) => {\n  // Busca el ancestro m√°s cercano que sea un <li> con la clase movie-cards__item.\n  const card = e.target.closest(\"li.movie-cards__item\");\n  if (card) {\n    console.log(card.id);\n    toogleModal(true);\n    modalMovie.innerHTML = \"\";\n    try {\n      const movie = await fetchMovieByID(card.id);\n      selectedMovie = movie;\n      createMovieModalMarkup(movie, modalMovie);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n};\n\nconst handleCloseModal = (e) => {\n  const closeBtn = e.target.closest(\"button.modal__btn\");\n  if (closeBtn) {\n    toogleModal(false);\n  }\n};\n\n// Eventos\n\nheroLibraryButtons.addEventListener(\"click\", handleLibraryButtons);\n// handleSelectCard es manejador en index.js tambien.\nmovieCardsLibrary.addEventListener(\"click\", handleSelectCard);\n\n// --------------------------------------------------------------------------\n// -index.js\ncloseModal.addEventListener(\"click\", handleCloseModal);\n"],"names":["$bpxeT","parcelRequire","$bb2af86579234925$var$movieCardsLibrary","document","querySelector","$bb2af86579234925$var$heroLibraryButtons","$bb2af86579234925$var$backdropModal","$bb2af86579234925$var$closeModal","$bb2af86579234925$var$modalMovie","$bb2af86579234925$var$toogleModal","isVisible","classList","add","remove","$bb2af86579234925$var$handleSelectCard","$parcel$interopDefault","$2TvXO","mark","_callee","e","card","movie","target","closest","console","log","id","innerHTML","$kK94C","fetchMovieByID","_ctx","sent","$5118m","createMovieModalMarkup","t0","message","addEventListener","nodeName","moviesJSON","localStorage","getItem","movies","JSON","parse","createLibraryMoviesMarkup","moviesJSON1","movies1"],"version":3,"file":"my-library.fc2b51f7.js.map"}