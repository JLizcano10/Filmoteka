{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAOA,MAAMC,EAAoBC,SAASC,cAAc,sBAC3CC,EAAqBF,SAASC,cAAc,oBAG5CE,EAAgBH,SAASC,cAAc,gBACvCG,EAAaJ,SAASC,cAAc,eACpCI,EAAaL,SAASC,cAAc,gBAG1C,IAAIK,EAAgB,KAGpB,MAAMC,EAAcC,IACdA,EACFL,EAAcM,UAAUC,IAAI,WAE5BP,EAAcM,UAAUE,OAAO,UAAU,EAyD7CT,EAAmBU,iBAAiB,SApDPC,IAC3B,GAA0B,WAAtBA,EAAEC,OAAOC,SAAb,CAMA,GAFAC,QAAQC,IAAIJ,EAAEC,OAAOI,IAED,YAAhBL,EAAEC,OAAOI,GAAkB,CAC7BnB,EAAkBoB,UAAY,GAC9B,MAAMC,EAAaC,aAAaC,QAAQ,gBAClCC,EAASC,KAAKC,MAAML,IAAe,GACzCJ,QAAQC,IAAIM,IACZ,EAAA1B,EAAA6B,2BAA0BH,EAAQxB,E,CAGpC,GAAoB,UAAhBc,EAAEC,OAAOI,GAAgB,CAC3BnB,EAAkBoB,UAAY,GAC9B,MAAMC,EAAaC,aAAaC,QAAQ,cAClCC,EAASC,KAAKC,MAAML,IAAe,GACzCJ,QAAQC,IAAIM,IACZ,EAAA1B,EAAA6B,2BAA0BH,EAAQxB,E,CAlBlC,C,IAoDJA,EAAkBa,iBAAiB,SA5BVe,MAAMd,IAE7B,MAAMe,EAAOf,EAAEC,OAAOe,QAAQ,wBAC9B,GAAID,EAAM,CACRZ,QAAQC,IAAIW,EAAKV,IACjBX,GAAY,GACZF,EAAWc,UAAY,GACvB,IACE,MAAMW,QAAc,EAAAC,EAAAC,gBAAeJ,EAAKV,IACxCZ,EAAgBwB,GAChB,EAAAjC,EAAAoC,wBAAuBH,EAAOzB,E,CAC9B,MAAO6B,GACPlB,QAAQC,IAAIiB,EAAMC,Q,MAoBxB/B,EAAWQ,iBAAiB,SAfHC,IACNA,EAAEC,OAAOe,QAAQ,sBAEhCtB,GAAY,EAAM","sources":["src/js/my-library.js"],"sourcesContent":["import {\n  createLibraryMoviesMarkup,\n  createMovieModalMarkup,\n} from './renderMarkup';\nimport { fetchMovieByID } from './tmdb-api';\n\n// DOM\nconst movieCardsLibrary = document.querySelector('.movie-cards__list');\nconst heroLibraryButtons = document.querySelector('.hero__container');\n// ---------------------------------------------------------------------\n// -index.js\nconst backdropModal = document.querySelector('div.backdrop');\nconst closeModal = document.querySelector('.modal__btn');\nconst modalMovie = document.querySelector('.modal-movie');\n\n// Variables-index.js\nlet selectedMovie = null;\n\n// Funciones-index.js\nconst toogleModal = isVisible => {\n  if (isVisible) {\n    backdropModal.classList.add('visible');\n  } else {\n    backdropModal.classList.remove('visible');\n  }\n};\n\n// Manejadores de eventos\nconst handleLibraryButtons = e => {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  console.log(e.target.id);\n\n  if (e.target.id === 'watched') {\n    movieCardsLibrary.innerHTML = '';\n    const moviesJSON = localStorage.getItem('watchedArray');\n    const movies = JSON.parse(moviesJSON) || [];\n    console.log(movies);\n    createLibraryMoviesMarkup(movies, movieCardsLibrary);\n  }\n\n  if (e.target.id === 'queue') {\n    movieCardsLibrary.innerHTML = '';\n    const moviesJSON = localStorage.getItem('queueArray');\n    const movies = JSON.parse(moviesJSON) || [];\n    console.log(movies);\n    createLibraryMoviesMarkup(movies, movieCardsLibrary);\n  }\n};\n\n// ---------------------------------------------------------------------\n// -index.js\nconst handleSelectCard = async e => {\n  // Busca el ancestro m√°s cercano que sea un <li> con la clase movie-cards__item.\n  const card = e.target.closest('li.movie-cards__item');\n  if (card) {\n    console.log(card.id);\n    toogleModal(true);\n    modalMovie.innerHTML = '';\n    try {\n      const movie = await fetchMovieByID(card.id);\n      selectedMovie = movie;\n      createMovieModalMarkup(movie, modalMovie);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n};\n\nconst handleCloseModal = e => {\n  const closeBtn = e.target.closest('button.modal__btn');\n  if (closeBtn) {\n    toogleModal(false);\n  }\n};\n\n// Eventos\n\nheroLibraryButtons.addEventListener('click', handleLibraryButtons);\n// handleSelectCard es manejador en index.js tambien.\nmovieCardsLibrary.addEventListener('click', handleSelectCard);\n\n// --------------------------------------------------------------------------\n// -index.js\ncloseModal.addEventListener('click', handleCloseModal);\n"],"names":["$cky31","parcelRequire","$085d2f9f3e302aeb$var$movieCardsLibrary","document","querySelector","$085d2f9f3e302aeb$var$heroLibraryButtons","$085d2f9f3e302aeb$var$backdropModal","$085d2f9f3e302aeb$var$closeModal","$085d2f9f3e302aeb$var$modalMovie","$085d2f9f3e302aeb$var$selectedMovie","$085d2f9f3e302aeb$var$toogleModal","isVisible","classList","add","remove","addEventListener","e","target","nodeName","console","log","id","innerHTML","moviesJSON","localStorage","getItem","movies","JSON","parse","createLibraryMoviesMarkup","async","card","closest","movie","$9MaFa","fetchMovieByID","createMovieModalMarkup","error","message"],"version":3,"file":"my-library.e9e5bf66.js.map"}