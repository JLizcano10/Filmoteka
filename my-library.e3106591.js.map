{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAOMC,EAAqBC,SAASC,cAAc,oBAC5CC,EAAeF,SAASC,cAAc,cAC5CC,EAAaC,MAAMC,QAAU,OAG7B,I,EAAMC,EAAOL,SAASC,cAAc,QAC9BK,EAAaN,SAASC,cAAc,sBACpCM,EAAgBP,SAASC,cAAc,gBAEvCO,GADaR,SAASC,cAAc,eACvBD,SAASC,cAAc,iBAqBpCQ,GApBaT,SAASC,cAAc,YACzBD,SAASC,cAAc,UAmBpB,SAAAS,GACdA,EACFH,EAAcI,UAAUC,IAAI,WAE5BL,EAAcI,UAAUE,OAAO,U,GAsC7BC,G,EAAmBC,EAAAlB,EAAA,CAAAkB,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAEvBC,EAKIC,E,uEALJD,EAAOD,EAAEG,OAAOC,QAAQ,yBACtB,C,uBACNd,GAAY,GACZD,EAAWgB,UAAY,G,mBAED,EAAAC,EAAAC,gBAAeN,EAAKO,I,OAAlCN,EAAKO,EAAAC,KACKR,GAChB,EAAAS,EAAAC,wBAAuBV,EAAOb,G,kDAE9BwB,QAAQC,IAAIL,EAAAM,GAAMC,S,mEAXOhB,G,iCA0D/BpB,EAAmBqC,iBAAiB,SA3FP,SAAAjB,GAC3B,GAA0B,WAAtBA,EAAEG,OAAOe,SAAb,CAIA,GAAoB,YAAhBlB,EAAEG,OAAOK,GAAkB,CAC7BrB,EAAWkB,UAAY,GACvB,IAAMc,EAAaC,aAAaC,QAAQ,gBAClCC,EAASC,KAAKC,MAAML,IAAe,GACrCG,EAAOG,OAAS,GAClB1C,EAAaC,MAAMC,QAAU,QAC7B,EAAA0B,EAAAe,2BAA0BJ,EAAQnC,IAElCJ,EAAaC,MAAMC,QAAU,O,CAIjC,GAAoB,UAAhBe,EAAEG,OAAOK,GAAgB,CAC3BrB,EAAWkB,UAAY,GACvB,IAAMsB,EAAaP,aAAaC,QAAQ,cAClCO,EAASL,KAAKC,MAAMG,IAAe,GAErCC,EAAOH,OAAS,GAClB1C,EAAaC,MAAMC,QAAU,QAC7B,EAAA0B,EAAAe,2BAA0BE,EAAQzC,IAElCJ,EAAaC,MAAMC,QAAU,O,CAxB/B,C,IA2FJE,EAAW8B,iBAAiB,QAAStB,GAIrCP,EAAc6B,iBAAiB,SAhDN,SAAAjB,IACNA,EAAEG,OAAOC,QAAQ,sBAEjBJ,EAAEG,SAAWf,IAG9BE,GAAY,E,IA2CdJ,EAAK+B,iBAAiB,WAxCM,SAAAjB,GACX,WAAXA,EAAE6B,MAINvC,GAAY,E,IApFqB,WACjCH,EAAWkB,UAAY,GACvB,IAAMc,EAAaC,aAAaC,QAAQ,gBAClCC,EAASC,KAAKC,MAAML,IAAe,GACrCG,EAAOG,OAAS,GAClB1C,EAAaC,MAAMC,QAAU,QAC7B,EAAA0B,EAAAe,2BAA0BJ,EAAQnC,IAElCJ,EAAaC,MAAMC,QAAU,O,CAoHjC6C,E","sources":["src/js/my-library.js"],"sourcesContent":["import {\n  createLibraryMoviesMarkup,\n  createMovieModalMarkup,\n} from './renderMarkup';\nimport { fetchMovieByID } from './tmdb-api';\n\n// DOM\nconst heroLibraryButtons = document.querySelector('.hero__container');\nconst noMoviesText = document.querySelector('.no-movies');\nnoMoviesText.style.display = 'none';\n// ---------------------------------------------------------------------\n// -index.js\nconst body = document.querySelector('body');\nconst movieCards = document.querySelector('.movie-cards__list');\nconst backdropModal = document.querySelector('div.backdrop');\nconst closeModal = document.querySelector('.modal__btn');\nconst modalMovie = document.querySelector('.modal-movie');\nconst addWatched = document.querySelector('.watched');\nconst addQueue = document.querySelector('.queue');\n\n// Variables-index.js\nlet selectedMovie = null;\n\n// Funciones\n\nconst renderInitialLibraryMovies = () => {\n  movieCards.innerHTML = '';\n  const moviesJSON = localStorage.getItem('watchedArray');\n  const movies = JSON.parse(moviesJSON) || [];\n  if (movies.length > 0) {\n    noMoviesText.style.display = 'none';\n    createLibraryMoviesMarkup(movies, movieCards);\n  } else {\n    noMoviesText.style.display = 'block';\n  }\n};\n// Funciones-index.js\nconst toogleModal = isVisible => {\n  if (isVisible) {\n    backdropModal.classList.add('visible');\n  } else {\n    backdropModal.classList.remove('visible');\n  }\n};\n\n// Manejadores de eventos\nconst handleLibraryButtons = e => {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (e.target.id === 'watched') {\n    movieCards.innerHTML = '';\n    const moviesJSON = localStorage.getItem('watchedArray');\n    const movies = JSON.parse(moviesJSON) || [];\n    if (movies.length > 0) {\n      noMoviesText.style.display = 'none';\n      createLibraryMoviesMarkup(movies, movieCards);\n    } else {\n      noMoviesText.style.display = 'block';\n    }\n  }\n\n  if (e.target.id === 'queue') {\n    movieCards.innerHTML = '';\n    const moviesJSON = localStorage.getItem('queueArray');\n    const movies = JSON.parse(moviesJSON) || [];\n\n    if (movies.length > 0) {\n      noMoviesText.style.display = 'none';\n      createLibraryMoviesMarkup(movies, movieCards);\n    } else {\n      noMoviesText.style.display = 'block';\n    }\n  }\n};\n\n// ---------------------------------------------------------------------\n// -index.js\nconst handleSelectCard = async e => {\n  // Busca el ancestro m√°s cercano que sea un <li> con la clase movie-cards__item.\n  const card = e.target.closest('li.movie-cards__item');\n  if (card) {\n    toogleModal(true);\n    modalMovie.innerHTML = '';\n    try {\n      const movie = await fetchMovieByID(card.id);\n      selectedMovie = movie;\n      createMovieModalMarkup(movie, modalMovie);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n};\n\nconst handleCloseModal = e => {\n  const closeBtn = e.target.closest('button.modal__btn');\n\n  if (!closeBtn && e.target !== backdropModal) {\n    return;\n  }\n  toogleModal(false);\n};\n\nconst handleKeyCloseModal = e => {\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  toogleModal(false);\n};\n\n/*REvisar\nconst handleAddWatched = e => {\n  const movieIsExist = watchedArray.some(el => el.id === selectedMovie.id);\n  if (selectedMovie && !movieIsExist) {\n    watchedArray.push(selectedMovie);\n    const watchedArrayJSON = JSON.stringify(watchedArray);\n    localStorage.setItem('watchedArray', watchedArrayJSON);\n  } else {\n    Notiflix.Notify.warning('This movie is already in list');\n  }\n};\n\nconst handleAddQueue = e => {\n  const movieIsExist = queueArray.some(el => el.id === selectedMovie.id);\n  if (selectedMovie && !movieIsExist) {\n    queueArray.push(selectedMovie);\n    const queueArrayJSON = JSON.stringify(queueArray);\n    localStorage.setItem('queueArray', queueArrayJSON);\n  } else {\n    Notiflix.Notify.warning('This movie is already in list');\n  }\n};\n*/\n// Eventos\n\nheroLibraryButtons.addEventListener('click', handleLibraryButtons);\n// handleSelectCard es manejador en index.js tambien.\nmovieCards.addEventListener('click', handleSelectCard);\n\n// --------------------------------------------------------------------------\n// -index.js\nbackdropModal.addEventListener('click', handleCloseModal);\nbody.addEventListener('keydown', handleKeyCloseModal);\n// addWatched.addEventListener('click', handleAddWatched);\n// addQueue.addEventListener('click', handleAddQueue);\n\n// inicializacion\nrenderInitialLibraryMovies();\n"],"names":["$bpxeT","parcelRequire","$bb2af86579234925$var$heroLibraryButtons","document","querySelector","$bb2af86579234925$var$noMoviesText","style","display","$bb2af86579234925$var$body","$bb2af86579234925$var$movieCards","$bb2af86579234925$var$backdropModal","$bb2af86579234925$var$modalMovie","$bb2af86579234925$var$toogleModal","isVisible","classList","add","remove","$bb2af86579234925$var$handleSelectCard","$parcel$interopDefault","$2TvXO","mark","_callee","e","card","movie","target","closest","innerHTML","$kK94C","fetchMovieByID","id","_ctx","sent","$5118m","createMovieModalMarkup","console","log","t0","message","addEventListener","nodeName","moviesJSON","localStorage","getItem","movies","JSON","parse","length","createLibraryMoviesMarkup","moviesJSON1","movies1","code","$bb2af86579234925$var$renderInitialLibraryMovies"],"version":3,"file":"my-library.e3106591.js.map"}