{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAQA,MAAMC,KACJC,EAAIC,WACJC,EAAUC,cACVC,EAAaC,WACbC,EAAUC,WACVC,EAAUC,WACVC,EAAUC,SACVC,GACEf,EAAAgB,gBAEEC,mBAAEC,EAAkBC,aAAEC,GAAiBpB,EAAAqB,gBAG7C,IAAIC,EAAgB,KACpBF,EAAaG,MAAMC,QAAU,OAG7B,MAYMC,EAAcC,IACdA,EACFnB,EAAcoB,UAAUC,IAAI,WAE5BrB,EAAcoB,UAAUE,OAAO,UAAU,EAgG7CX,EAAmBY,iBAAiB,SA3FPC,IAC3B,GAA0B,WAAtBA,EAAEC,OAAOC,SAAb,CAIA,GAAoB,YAAhBF,EAAEC,OAAOE,GAAkB,CAC7B7B,EAAW8B,UAAY,GACvB,MAAMC,EAAaC,aAAaC,QAAQ,gBAClCC,EAASC,KAAKC,MAAML,IAAe,GACrCG,EAAOG,OAAS,GAClBtB,EAAaG,MAAMC,QAAU,QAC7B,EAAAmB,EAAAC,2BAA0BL,EAAQlC,IAElCe,EAAaG,MAAMC,QAAU,O,CAIjC,GAAoB,UAAhBO,EAAEC,OAAOE,GAAgB,CAC3B7B,EAAW8B,UAAY,GACvB,MAAMC,EAAaC,aAAaC,QAAQ,cAClCC,EAASC,KAAKC,MAAML,IAAe,GAErCG,EAAOG,OAAS,GAClBtB,EAAaG,MAAMC,QAAU,QAC7B,EAAAmB,EAAAC,2BAA0BL,EAAQlC,IAElCe,EAAaG,MAAMC,QAAU,O,CAxB/B,C,IA2FJnB,EAAWyB,iBAAiB,SA5DHe,MAAMd,IAE7B,MAAMe,EAAOf,EAAEC,OAAOe,QAAQ,wBAC9B,GAAID,EAAM,CACRrB,GAAY,GACZd,EAAWwB,UAAY,GACvB,IACE,MAAMa,QAAc,EAAAC,EAAAC,gBAAeJ,EAAKZ,IACxCZ,EAAgB0B,GAChB,EAAAL,EAAAQ,wBAAuBH,EAAOrC,E,CAC9B,MAAOyC,GACPC,QAAQC,IAAIF,EAAMG,Q,MAqDxBhD,EAAcuB,iBAAiB,SAhDNC,KACNA,EAAEC,OAAOe,QAAQ,sBAEjBhB,EAAEC,SAAWzB,IAG9BkB,GAAY,EAAM,IA2CpBtB,EAAK2B,iBAAiB,WAxCMC,IACX,WAAXA,EAAEyB,MAIN/B,GAAY,EAAM,IApFe,MACjCpB,EAAW8B,UAAY,GACvB,MAAMC,EAAaC,aAAaC,QAAQ,gBAClCC,EAASC,KAAKC,MAAML,IAAe,GACrCG,EAAOG,OAAS,GAClBtB,EAAaG,MAAMC,QAAU,QAC7B,EAAAmB,EAAAC,2BAA0BL,EAAQlC,IAElCe,EAAaG,MAAMC,QAAU,OAAO,EAoHxCiC","sources":["src/js/my-library.js"],"sourcesContent":["import { commonElements, libraryElements } from './domElements';\nimport {\n  createLibraryMoviesMarkup,\n  createMovieModalMarkup,\n} from './renderMarkup';\nimport { fetchMovieByID } from './tmdb-api';\n\n// DOM\nconst {\n  body,\n  movieCards,\n  backdropModal,\n  closeModal,\n  modalMovie,\n  addWatched,\n  addQueue,\n} = commonElements;\n\nconst { heroLibraryButtons, noMoviesText } = libraryElements;\n\n// Variables-index.js\nlet selectedMovie = null;\nnoMoviesText.style.display = 'none';\n// Funciones\n\nconst renderInitialLibraryMovies = () => {\n  movieCards.innerHTML = '';\n  const moviesJSON = localStorage.getItem('watchedArray');\n  const movies = JSON.parse(moviesJSON) || [];\n  if (movies.length > 0) {\n    noMoviesText.style.display = 'none';\n    createLibraryMoviesMarkup(movies, movieCards);\n  } else {\n    noMoviesText.style.display = 'block';\n  }\n};\n// Funciones-index.js\nconst toogleModal = isVisible => {\n  if (isVisible) {\n    backdropModal.classList.add('visible');\n  } else {\n    backdropModal.classList.remove('visible');\n  }\n};\n\n// Manejadores de eventos\nconst handleLibraryButtons = e => {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (e.target.id === 'watched') {\n    movieCards.innerHTML = '';\n    const moviesJSON = localStorage.getItem('watchedArray');\n    const movies = JSON.parse(moviesJSON) || [];\n    if (movies.length > 0) {\n      noMoviesText.style.display = 'none';\n      createLibraryMoviesMarkup(movies, movieCards);\n    } else {\n      noMoviesText.style.display = 'block';\n    }\n  }\n\n  if (e.target.id === 'queue') {\n    movieCards.innerHTML = '';\n    const moviesJSON = localStorage.getItem('queueArray');\n    const movies = JSON.parse(moviesJSON) || [];\n\n    if (movies.length > 0) {\n      noMoviesText.style.display = 'none';\n      createLibraryMoviesMarkup(movies, movieCards);\n    } else {\n      noMoviesText.style.display = 'block';\n    }\n  }\n};\n\n// ---------------------------------------------------------------------\n// -index.js\nconst handleSelectCard = async e => {\n  // Busca el ancestro m√°s cercano que sea un <li> con la clase movie-cards__item.\n  const card = e.target.closest('li.movie-cards__item');\n  if (card) {\n    toogleModal(true);\n    modalMovie.innerHTML = '';\n    try {\n      const movie = await fetchMovieByID(card.id);\n      selectedMovie = movie;\n      createMovieModalMarkup(movie, modalMovie);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n};\n\nconst handleCloseModal = e => {\n  const closeBtn = e.target.closest('button.modal__btn');\n\n  if (!closeBtn && e.target !== backdropModal) {\n    return;\n  }\n  toogleModal(false);\n};\n\nconst handleKeyCloseModal = e => {\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  toogleModal(false);\n};\n\n/*REvisar\nconst handleAddWatched = e => {\n  const movieIsExist = watchedArray.some(el => el.id === selectedMovie.id);\n  if (selectedMovie && !movieIsExist) {\n    watchedArray.push(selectedMovie);\n    const watchedArrayJSON = JSON.stringify(watchedArray);\n    localStorage.setItem('watchedArray', watchedArrayJSON);\n  } else {\n    Notiflix.Notify.warning('This movie is already in list');\n  }\n};\n\nconst handleAddQueue = e => {\n  const movieIsExist = queueArray.some(el => el.id === selectedMovie.id);\n  if (selectedMovie && !movieIsExist) {\n    queueArray.push(selectedMovie);\n    const queueArrayJSON = JSON.stringify(queueArray);\n    localStorage.setItem('queueArray', queueArrayJSON);\n  } else {\n    Notiflix.Notify.warning('This movie is already in list');\n  }\n};\n*/\n// Eventos\n\nheroLibraryButtons.addEventListener('click', handleLibraryButtons);\n// handleSelectCard es manejador en index.js tambien.\nmovieCards.addEventListener('click', handleSelectCard);\n\n// --------------------------------------------------------------------------\n// -index.js\nbackdropModal.addEventListener('click', handleCloseModal);\nbody.addEventListener('keydown', handleKeyCloseModal);\n// addWatched.addEventListener('click', handleAddWatched);\n// addQueue.addEventListener('click', handleAddQueue);\n\n// inicializacion\nrenderInitialLibraryMovies();\n"],"names":["$5iv9P","parcelRequire","body","$085d2f9f3e302aeb$var$body","movieCards","$085d2f9f3e302aeb$var$movieCards","backdropModal","$085d2f9f3e302aeb$var$backdropModal","closeModal","$085d2f9f3e302aeb$var$closeModal","modalMovie","$085d2f9f3e302aeb$var$modalMovie","addWatched","$085d2f9f3e302aeb$var$addWatched","addQueue","$085d2f9f3e302aeb$var$addQueue","commonElements","heroLibraryButtons","$085d2f9f3e302aeb$var$heroLibraryButtons","noMoviesText","$085d2f9f3e302aeb$var$noMoviesText","libraryElements","$085d2f9f3e302aeb$var$selectedMovie","style","display","$085d2f9f3e302aeb$var$toogleModal","isVisible","classList","add","remove","addEventListener","e","target","nodeName","id","innerHTML","moviesJSON","localStorage","getItem","movies","JSON","parse","length","$cky31","createLibraryMoviesMarkup","async","card","closest","movie","$9MaFa","fetchMovieByID","createMovieModalMarkup","error","console","log","message","code","$085d2f9f3e302aeb$var$renderInitialLibraryMovies"],"version":3,"file":"my-library.0b4a44e2.js.map"}