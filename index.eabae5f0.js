var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},e.parcelRequired7c6=r);var a=r("cky31"),n=r("9MaFa");const c=document.querySelector("form.hero__form"),s=document.querySelector("ul.movie-cards__list"),i=document.querySelector("button.pagination__add"),l=document.querySelector("button.pagination__sub"),u=document.querySelector("span.pagination__span"),d=document.querySelector("div.backdrop"),m=document.querySelector(".modal__btn"),p=document.querySelector(".modal-movie"),g=document.querySelector(".watched"),v=document.querySelector(".queue");let y,f,S=1,h=null;const _=JSON.parse(localStorage.getItem("watchedArray"))||[],q=JSON.parse(localStorage.getItem("queueArray"))||[],L=e=>{e?d.classList.add("visible"):d.classList.remove("visible")},w=async(e,t)=>{s.innerHTML="";try{const o=await(0,n.fetchMovies)(e,t);y=o.total_pages,console.log(o.total_pages);const r=o.results;(0,a.createMoviesMarkup)(r,s)}catch(e){console.log(e.message)}};c.addEventListener("submit",(async e=>{e.preventDefault(),S=1,u.textContent=1,s.innerHTML="";const t=e.target;f=t.elements.movieInput.value;const o=new URLSearchParams({query:f,page:S});w("search/movie?",o),t.reset()})),i.addEventListener("click",(()=>{if(S<y){S+=1,u.textContent=S;const e=new URLSearchParams({page:S});f&&e.set("query",f);w(f?"search/movie?":"movie/popular?",e)}})),l.addEventListener("click",(()=>{if(S>1){S-=1,u.textContent=S;const e=new URLSearchParams({page:S});f&&e.set("query",f);w(f?"search/movie?":"movie/popular?",e)}console.log(S)})),s.addEventListener("click",(async e=>{const t=e.target.closest("li.movie-cards__item");if(t){console.log(t.id),L(!0),p.innerHTML="";try{const e=await(0,n.fetchMovieByID)(t.id);h=e,(0,a.createMovieModalMarkup)(e,p)}catch(e){console.log(e.message)}}})),m.addEventListener("click",(e=>{e.target.closest("button.modal__btn")&&L(!1)})),g.addEventListener("click",(e=>{if(h){_.push(h),console.log(_);const e=JSON.stringify(_);localStorage.setItem("watchedArray",e)}})),v.addEventListener("click",(e=>{if(h){q.push(h);const e=JSON.stringify(q);localStorage.setItem("queueArray",e)}})),(async()=>{const e=new URLSearchParams({page:S});w("movie/popular?",e)})();
//# sourceMappingURL=index.eabae5f0.js.map
