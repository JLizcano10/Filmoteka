var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},e.parcelRequired7c6=r);var a=r("cky31"),n=r("9MaFa");const c=document.querySelector("form.hero__form"),s=document.querySelector("ul.movie-cards__list"),i=document.querySelector("button.pagination__add"),l=document.querySelector("button.pagination__sub"),d=document.querySelector("span.pagination__span"),u=document.querySelector("div.backdrop"),m=document.querySelector(".modal__btn"),p=document.querySelector(".modal-movie"),y=document.querySelector(".watched"),v=document.querySelector(".queue"),g=document.querySelector(".loader");let f,S,h=1,q=null;g.style.display="none";const _=JSON.parse(localStorage.getItem("watchedArray"))||[],L=JSON.parse(localStorage.getItem("queueArray"))||[],b=e=>{e?u.classList.add("visible"):u.classList.remove("visible")},w=async(e,t)=>{s.innerHTML="";try{const o=await(0,n.fetchMovies)(e,t);f=o.total_pages;const r=o.results;r.length>0?(0,a.createMoviesMarkup)(r,s):(console.log("Error"),g.style.display="block")}catch(e){console.log(e.message)}};c.addEventListener("submit",(async e=>{e.preventDefault(),h=1,d.textContent=1,s.innerHTML="";const t=e.target;S=t.elements.movieInput.value;const o=new URLSearchParams({query:S,page:h});w("search/movie?",o),t.reset()})),i.addEventListener("click",(()=>{if(h<f){h+=1,d.textContent=h;const e=new URLSearchParams({page:h});S&&e.set("query",S);w(S?"search/movie?":"movie/popular?",e)}})),l.addEventListener("click",(()=>{if(h>1){h-=1,d.textContent=h;const e=new URLSearchParams({page:h});S&&e.set("query",S);w(S?"search/movie?":"movie/popular?",e)}})),s.addEventListener("click",(async e=>{const t=e.target.closest("li.movie-cards__item");if(t){b(!0),p.innerHTML="";try{const e=await(0,n.fetchMovieByID)(t.id);q=e,(0,a.createMovieModalMarkup)(e,p)}catch(e){console.log(e.message)}}})),m.addEventListener("click",(e=>{e.target.closest("button.modal__btn")&&b(!1)})),y.addEventListener("click",(e=>{if(q){_.push(q);const e=JSON.stringify(_);localStorage.setItem("watchedArray",e)}})),v.addEventListener("click",(e=>{if(q){L.push(q);const e=JSON.stringify(L);localStorage.setItem("queueArray",e)}})),(async()=>{const e=new URLSearchParams({page:h});w("movie/popular?",e)})();
//# sourceMappingURL=index.d70a7aea.js.map
